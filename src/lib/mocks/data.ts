import { daysAgo, isoDate } from './utils'
import { mockConversations as expandedMockConversations } from '../../data/mockConversations'

const now = new Date()

export const org = {
  id: 'org-mock-1',
  name: 'Kadabra Mock Org',
  slug: 'kadabra-mock',
}

export const users = [
  {
    id: 'user-mock-admin',
    orgId: org.id,
    email: 'alex.lee@kadabra.ai',
    name: 'Alex Lee',
    avatar: 'https://i.pravatar.cc/96?img=12',
    role: 'admin' as const,
    createdAt: daysAgo(180),
    updatedAt: isoDate(now),
  },
  {
    id: 'user-mock-dev',
    orgId: org.id,
    email: 'samir.khan@kadabra.ai',
    name: 'Samir Khan',
    avatar: 'https://i.pravatar.cc/96?img=32',
    role: 'developer' as const,
    createdAt: daysAgo(140),
    updatedAt: isoDate(now),
  },
  {
    id: 'user-mock-member',
    orgId: org.id,
    email: 'taylor.nguyen@kadabra.ai',
    name: 'Taylor Nguyen',
    avatar: 'https://i.pravatar.cc/96?img=48',
    role: 'member' as 'owner' | 'member' | 'viewer',
    createdAt: daysAgo(90),
    updatedAt: isoDate(now),
  },
]

export const invitations = [
  {
    id: 'invite-mock-1',
    orgId: org.id,
    email: 'maria.lopez@example.com',
    role: 'member' as 'owner' | 'member' | 'viewer',
    status: 'pending' as const,
    token: 'mock-token-1',
    expiresAt: daysAgo(-5),
    createdAt: daysAgo(2),
    acceptedAt: null,
    invitedByUserId: users[0].id,
  },
  {
    id: 'invite-mock-2',
    orgId: org.id,
    email: 'jack.chen@example.com',
    role: 'developer' as const,
    status: 'accepted' as const,
    token: 'mock-token-2',
    expiresAt: daysAgo(-10),
    createdAt: daysAgo(14),
    acceptedAt: daysAgo(12),
    invitedByUserId: users[1].id,
  },
]

export const apiKeys = [
  {
    id: 'api-key-mock-1',
    name: 'Production Integration',
    keyMasked: 'pk_live_****abcd',
    hasEncryptedKey: true,
    lastUsedAt: daysAgo(1),
    createdAt: daysAgo(45),
    expiresAt: null,
    orgId: org.id,
    keyPlain: 'pk_live_1234abcd5678efgh',
  },
  {
    id: 'api-key-mock-2',
    name: 'QA Sandbox',
    keyMasked: 'pk_test_****qwer',
    hasEncryptedKey: true,
    lastUsedAt: daysAgo(7),
    createdAt: daysAgo(90),
    expiresAt: daysAgo(-30),
    orgId: org.id,
    keyPlain: 'pk_test_9876qwer5432tyui',
  },
]

export const teams = [
  {
    id: 'team-mock-support',
    orgId: org.id,
    name: 'Support Team',
    description: 'Customer support and issue resolution' as string | null,
    slug: 'support-team',
    status: 'active' as const,
    isDefault: false,
    isAssignable: true,
    createdAt: daysAgo(60),
    updatedAt: daysAgo(1),
  },
  {
    id: 'team-mock-sales',
    orgId: org.id,
    name: 'Sales Team',
    description: 'Lead generation and customer acquisition' as string | null,
    slug: 'sales-team',
    status: 'active' as const,
    isDefault: false,
    isAssignable: true,
    createdAt: daysAgo(45),
    updatedAt: daysAgo(2),
  },
  {
    id: 'team-mock-growth',
    orgId: org.id,
    name: 'Growth Team',
    description: 'Upsell and expansion opportunities' as string | null,
    slug: 'growth-team',
    status: 'active' as const,
    isDefault: true,
    isAssignable: true,
    createdAt: daysAgo(30),
    updatedAt: daysAgo(0),
  },
]

export const teamMembers = [
  {
    id: 'team-member-1',
    teamId: teams[0].id,
    userId: users[0].id,
    role: 'owner' as 'owner' | 'member' | 'viewer',
  },
  {
    id: 'team-member-2',
    teamId: teams[0].id,
    userId: users[1].id,
    role: 'member' as 'owner' | 'member' | 'viewer',
  },
  {
    id: 'team-member-3',
    teamId: teams[1].id,
    userId: users[0].id,
    role: 'owner' as 'owner' | 'member' | 'viewer',
  },
  {
    id: 'team-member-4',
    teamId: teams[2].id,
    userId: users[0].id,
    role: 'owner' as 'owner' | 'member' | 'viewer',
  },
  {
    id: 'team-member-5',
    teamId: teams[2].id,
    userId: users[2].id,
    role: 'member' as 'owner' | 'member' | 'viewer',
  },
]

export const boards = [
  {
    id: 'board-mock-leads',
    orgId: org.id,
    name: 'Sales Leads',
    description: 'Track and manage sales leads' as string | null,
    visibility: 'org' as 'org' | 'team',
    cardType: 'lead' as 'lead' | 'case' | 'deal' | 'task' | 'custom',
    defaultTeamId: teams[1].id as string | null,
    createdAt: daysAgo(20),
    updatedAt: daysAgo(1),
  },
  {
    id: 'board-mock-cases',
    orgId: org.id,
    name: 'Support Cases',
    description: 'Customer support tickets and issues' as string | null,
    visibility: 'team' as 'org' | 'team',
    cardType: 'case' as 'lead' | 'case' | 'deal' | 'task' | 'custom',
    defaultTeamId: teams[0].id as string | null,
    createdAt: daysAgo(15),
    updatedAt: daysAgo(0),
  },
  {
    id: 'board-mock-deals',
    orgId: org.id,
    name: 'Deal Pipeline',
    description: 'Track sales opportunities' as string | null,
    visibility: 'org' as 'org' | 'team',
    cardType: 'deal' as 'lead' | 'case' | 'deal' | 'task' | 'custom',
    defaultTeamId: teams[1].id as string | null,
    createdAt: daysAgo(10),
    updatedAt: daysAgo(2),
  },
]

export const boardColumns = [
  {
    id: 'board-col-1',
    boardId: boards[0].id,
    name: 'New Leads',
    position: 0,
    wipLimit: null,
    createdAt: daysAgo(20),
    updatedAt: daysAgo(20),
  },
  {
    id: 'board-col-2',
    boardId: boards[0].id,
    name: 'Contacted',
    position: 1,
    wipLimit: null,
    createdAt: daysAgo(20),
    updatedAt: daysAgo(20),
  },
  {
    id: 'board-col-3',
    boardId: boards[0].id,
    name: 'Qualified',
    position: 2,
    wipLimit: null,
    createdAt: daysAgo(20),
    updatedAt: daysAgo(20),
  },
  {
    id: 'board-col-4',
    boardId: boards[1].id,
    name: 'Backlog',
    position: 0,
    wipLimit: null,
    createdAt: daysAgo(15),
    updatedAt: daysAgo(15),
  },
  {
    id: 'board-col-5',
    boardId: boards[1].id,
    name: 'In Progress',
    position: 1,
    wipLimit: 5,
    createdAt: daysAgo(15),
    updatedAt: daysAgo(15),
  },
  {
    id: 'board-col-6',
    boardId: boards[1].id,
    name: 'Resolved',
    position: 2,
    wipLimit: null,
    createdAt: daysAgo(15),
    updatedAt: daysAgo(15),
  },
]

export const boardCards = [
  {
    id: 'board-card-1',
    boardId: boards[0].id,
    columnId: boardColumns[0].id,
    actionPlanId: null,
    customerId: 'cust-mock-1' as string | null,
    title: 'Follow up with Acme Corp',
    description: 'Initial contact for enterprise plan' as string | null,
    type: 'lead' as 'lead' | 'case' | 'deal' | 'task' | 'custom',
    status: 'active' as const,
    position: 0,
    dueDate: null,
    assigneeTeamId: teams[1].id as string | null,
    assigneeUserId: null,
    metadata: null as Record<string, unknown> | null,
    createdAt: daysAgo(5),
    updatedAt: daysAgo(1),
  },
  {
    id: 'board-card-2',
    boardId: boards[1].id,
    columnId: boardColumns[4].id,
    actionPlanId: 'ap-mock-1',
    customerId: 'cust-mock-1' as string | null,
    title: 'Billing issue resolution',
    description: 'Customer reported unexpected charge' as string | null,
    type: 'case' as 'lead' | 'case' | 'deal' | 'task' | 'custom',
    status: 'active' as const,
    position: 0,
    dueDate: null,
    assigneeTeamId: teams[0].id,
    assigneeUserId: users[0].id,
    metadata: { badge: 'at-risk' },
    createdAt: daysAgo(3),
    updatedAt: daysAgo(0),
  },
]

export const boardTeamPermissions = [
  {
    id: 'board-perm-1',
    boardId: boards[1].id,
    teamId: teams[0].id,
    mode: 'edit' as const,
  },
  {
    id: 'board-perm-2',
    boardId: boards[1].id,
    teamId: teams[2].id,
    mode: 'view' as const,
  },
]

export const routingRules = [
  {
    id: 'routing-rule-1',
    orgId: org.id,
    name: 'Route at-risk to Support',
    channel: 'phone' as 'phone' | 'email' | 'chat' | 'video' | 'sms' | 'ai-call' | 'voice-message' | null,
    conditionType: 'badge' as 'badge' | 'intent' | 'urgency' | 'customer_segment' | 'channel' | 'custom',
    conditionValue: 'at-risk' as string | null,
    targetTeamId: teams[0].id,
    targetBoardId: boards[1].id as string | null,
    targetColumnId: boardColumns[4].id as string | null,
    priority: 10,
    enabled: true,
    metadata: null as Record<string, unknown> | null,
    createdAt: daysAgo(10),
    updatedAt: daysAgo(5),
  },
  {
    id: 'routing-rule-2',
    orgId: org.id,
    name: 'Route opportunities to Sales',
    channel: null as 'phone' | 'email' | 'chat' | 'video' | 'sms' | 'ai-call' | 'voice-message' | null,
    conditionType: 'badge' as 'badge' | 'intent' | 'urgency' | 'customer_segment' | 'channel' | 'custom',
    conditionValue: 'opportunity' as string | null,
    targetTeamId: teams[1].id,
    targetBoardId: boards[0].id as string | null,
    targetColumnId: boardColumns[0].id as string | null,
    priority: 20,
    enabled: true,
    metadata: null as Record<string, unknown> | null,
    createdAt: daysAgo(8),
    updatedAt: daysAgo(3),
  },
]

export const actionPlans = [
  {
    id: 'ap-mock-1',
    customerId: 'cust-mock-1' as string | null,
    badge: 'at-risk' as const,
    recommendation: 'Schedule executive check-in call',
    whatToDo: 'Host a 30-minute executive call within 48 hours to address billing concerns.',
    whyStrategy: 'Executive alignment reduces churn risk by 32% for enterprise customers.',
    status: 'active' as const,
    actionItems: [
      {
        id: 'ap-item-1',
        type: 'call' as const,
        title: 'Executive follow-up',
        description: 'Coordinate with finance director for joint call.',
        status: 'pending' as const,
      },
      {
        id: 'ap-item-2',
        type: 'email' as const,
        title: 'Send revised pricing deck',
        description: 'Include updated ROI analysis and executive summary.',
        status: 'pending' as const,
      },
    ],
    createdAt: daysAgo(5),
    updatedAt: daysAgo(1),
    completedAt: null,
    canceledAt: null,
  },
  {
    id: 'ap-mock-2',
    customerId: 'cust-mock-2',
    badge: 'opportunity' as const,
    recommendation: 'Propose premium analytics add-on',
    whatToDo: 'Prepare tailored proposal and schedule demo for analytics module.',
    whyStrategy: 'Customer expressed interest in advanced insights; high upsell likelihood.',
    status: 'active' as const,
    actionItems: [
      {
        id: 'ap-item-3',
        type: 'task' as const,
        title: 'Draft proposal',
        description: 'Highlight success metrics and roadmap alignment.',
        status: 'pending' as const,
      },
    ],
    createdAt: daysAgo(12),
    updatedAt: daysAgo(3),
    completedAt: null,
    canceledAt: null,
  },
  {
    id: 'ap-mock-3',
    customerId: 'cust-mock-3',
    badge: 'follow-up' as const,
    recommendation: 'Check-in email regarding onboarding progress',
    whatToDo: 'Send templated onboarding email, confirm they received enablement assets.',
    whyStrategy: 'Maintains momentum while customer completes internal training.',
    status: 'completed' as const,
    actionItems: [
      {
        id: 'ap-item-4',
        type: 'email' as const,
        title: 'Share onboarding assets',
        description: 'Include links to knowledge base and training videos.',
        status: 'completed' as const,
      },
    ],
    createdAt: daysAgo(30),
    updatedAt: daysAgo(10),
    completedAt: daysAgo(8),
    canceledAt: null,
  },
  {
    id: 'ap-mock-4',
    customerId: 'cust-mock-4',
    badge: 'lead' as const,
    recommendation: 'Convert pilot into multi-team rollout',
    whatToDo: 'Document pilot outcomes and align on rollout milestones with regional leaders.',
    whyStrategy: 'Customer has strong adoption during pilot; expansion could 3x ARR.',
    status: 'active' as const,
    actionItems: [
      {
        id: 'ap-item-5',
        type: 'task' as const,
        title: 'Compile pilot metrics',
        description: 'Summarize usage, NPS, and productivity gains from pilot cohort.',
        status: 'pending' as const,
      },
      {
        id: 'ap-item-6',
        type: 'call' as const,
        title: 'Schedule rollout planning call',
        description: 'Invite regional stakeholders and outline expansion phases.',
        status: 'pending' as const,
      },
    ],
    createdAt: daysAgo(7),
    updatedAt: daysAgo(1),
    completedAt: null,
    canceledAt: null,
  },
  {
    id: 'ap-mock-5',
    customerId: 'cust-mock-5',
    badge: 'no-action' as const,
    recommendation: 'Monitor health and share quarterly insights',
    whatToDo: 'Send health score summary and confirm no immediate blockers.',
    whyStrategy: 'Customer recently stabilized after support escalation; keep visible but light touch.',
    status: 'active' as const,
    actionItems: [
      {
        id: 'ap-item-7',
        type: 'email' as const,
        title: 'Send health check recap',
        description: 'Share support ticket resolution summary and invite feedback.',
        status: 'pending' as const,
      },
      {
        id: 'ap-item-8',
        type: 'task' as const,
        title: 'Log QBR notes',
        description: 'Capture highlights from last QBR and align on next review date.',
        status: 'pending' as const,
      },
    ],
    createdAt: daysAgo(20),
    updatedAt: daysAgo(5),
    completedAt: null,
    canceledAt: null,
  },
  {
    id: 'ap-mock-6',
    customerId: 'cust-mock-6',
    badge: 'at-risk' as const,
    recommendation: 'Rebuild trust after outage incident',
    whatToDo: 'Deliver root-cause analysis and offer service credits within 48 hours.',
    whyStrategy: 'Severe outage impacted weekly planning; transparent remediation required to retain account.',
    status: 'active' as const,
    actionItems: [
      {
        id: 'ap-item-9',
        type: 'text' as const,
        title: 'Draft RCA summary',
        description: 'Outline incident timeline and preventative measures.',
        status: 'pending' as const,
      },
      {
        id: 'ap-item-10',
        type: 'call' as const,
        title: 'Host recovery call',
        description: 'Include support engineering lead to answer technical follow-ups.',
        status: 'pending' as const,
      },
    ],
    createdAt: daysAgo(3),
    updatedAt: daysAgo(1),
    completedAt: null,
    canceledAt: null,
  },
]

export const customers = [
  {
    id: 'cust-mock-1',
    orgId: org.id,
    name: 'Jamie Rivera',
    companyName: 'Aurora Dynamics',
    email: 'jamie.rivera@auroradynamics.com',
    phone: '+1 (415) 555-0172',
    avatar: 'https://i.pravatar.cc/200?img=60',
    riskScore: 82,
    opportunityScore: 46,
    communications: [
      { type: 'email', count: 12, lastTime: daysAgo(1) },
      { type: 'phone', count: 4, lastTime: daysAgo(2) },
    ],
    lastCommunication: {
      type: 'email',
      time: daysAgo(1),
      topic: 'Renewal Pricing Alignment',
      shortTopic: 'Renewal',
      longTopic:
        'Discussed 2025 renewal terms, highlighted need for executive sponsorship and billing remediation.',
    },
    actionPlanId: 'ap-mock-1',
    createdAt: daysAgo(280),
    updatedAt: daysAgo(1),
    totalConversations: 28,
    totalTasks: 6,
    totalActionPlans: 3,
  },
  {
    id: 'cust-mock-2',
    orgId: org.id,
    name: 'Priya Desai',
    companyName: 'Lumenwave Analytics',
    email: 'priya.desai@lumenwave.io',
    phone: '+1 (347) 555-0198',
    avatar: 'https://i.pravatar.cc/200?img=47',
    riskScore: 34,
    opportunityScore: 88,
    communications: [
      { type: 'email', count: 9, lastTime: daysAgo(4) },
      { type: 'chat', count: 6, lastTime: daysAgo(2) },
    ],
    lastCommunication: {
      type: 'chat',
      time: daysAgo(2),
      topic: 'Analytics Add-on Interest',
      shortTopic: 'Upsell',
      longTopic:
        'Customer asked detailed questions about premium analytics module and integration requirements.',
    },
    actionPlanId: 'ap-mock-2',
    createdAt: daysAgo(180),
    updatedAt: daysAgo(2),
    totalConversations: 18,
    totalTasks: 4,
    totalActionPlans: 2,
  },
  {
    id: 'cust-mock-3',
    orgId: org.id,
    name: 'Marcus Howard',
    companyName: 'Evergreen Systems',
    email: 'marcus.howard@evergreen.io',
    phone: '+1 (206) 555-0143',
    avatar: 'https://i.pravatar.cc/200?img=14',
    riskScore: 22,
    opportunityScore: 30,
    communications: [
      { type: 'email', count: 5, lastTime: daysAgo(9) },
      { type: 'voice-message', count: 1, lastTime: daysAgo(8) },
    ],
    lastCommunication: {
      type: 'voice-message',
      time: daysAgo(8),
      topic: 'Onboarding Progress Update',
      shortTopic: 'Onboarding',
      longTopic:
        'Customer confirmed first milestone complete, requested check-in next week.',
    },
    actionPlanId: null,
    createdAt: daysAgo(120),
    updatedAt: daysAgo(8),
    totalConversations: 8,
    totalTasks: 3,
    totalActionPlans: 1,
  },
  {
    id: 'cust-mock-4',
    orgId: org.id,
    name: 'Lina Park',
    companyName: 'Blue Horizon Robotics',
    email: 'lina.park@bluehorizon.ai',
    phone: '+1 (312) 555-0114',
    avatar: 'https://i.pravatar.cc/200?img=36',
    riskScore: 48,
    opportunityScore: 92,
    communications: [
      { type: 'sms', count: 7, lastTime: daysAgo(1) },
      { type: 'phone', count: 2, lastTime: daysAgo(3) },
    ],
    lastCommunication: {
      type: 'sms',
      time: daysAgo(1),
      topic: 'Pilot Rollout Results',
      shortTopic: 'Pilot recap',
      longTopic:
        'Shared pilot success metrics and asked for rollout plan to additional manufacturing sites.',
    },
    actionPlanId: 'ap-mock-4',
    createdAt: daysAgo(210),
    updatedAt: daysAgo(1),
    totalConversations: 22,
    totalTasks: 5,
    totalActionPlans: 3,
  },
  {
    id: 'cust-mock-5',
    orgId: org.id,
    name: 'Omar Delgado',
    companyName: 'SustainIQ',
    email: 'omar.delgado@sustainiq.com',
    phone: '+1 (512) 555-0194',
    avatar: 'https://i.pravatar.cc/200?img=52',
    riskScore: 18,
    opportunityScore: 24,
    communications: [
      { type: 'email', count: 3, lastTime: daysAgo(6) },
      { type: 'video', count: 1, lastTime: daysAgo(14) },
    ],
    lastCommunication: {
      type: 'email',
      time: daysAgo(6),
      topic: 'Quarterly Health Check',
      shortTopic: 'Health recap',
      longTopic:
        'Customer confirmed service levels back to normal post-incident and requested quarterly insights only.',
    },
    actionPlanId: 'ap-mock-5',
    createdAt: daysAgo(400),
    updatedAt: daysAgo(6),
    totalConversations: 12,
    totalTasks: 2,
    totalActionPlans: 4,
  },
  {
    id: 'cust-mock-6',
    orgId: org.id,
    name: 'Sasha Petrov',
    companyName: 'Nimbus Health',
    email: 'sasha.petrov@nimbushealth.co',
    phone: '+44 20 7946 0101',
    avatar: 'https://i.pravatar.cc/200?img=67',
    riskScore: 91,
    opportunityScore: 38,
    communications: [
      { type: 'ai-call', count: 1, lastTime: daysAgo(0) },
      { type: 'email', count: 4, lastTime: daysAgo(1) },
    ],
    lastCommunication: {
      type: 'ai-call',
      time: daysAgo(0),
      topic: 'Outage Post-Mortem Review',
      shortTopic: 'Outage review',
      longTopic:
        'AI call captured customer frustration about recent outage; expects RCA and credit by end of week.',
    },
    actionPlanId: 'ap-mock-6',
    createdAt: daysAgo(90),
    updatedAt: daysAgo(0),
    totalConversations: 16,
    totalTasks: 7,
    totalActionPlans: 2,
  },
]

export const tasks = [
  {
    id: 'task-mock-1',
    orgId: org.id,
    customerId: 'cust-mock-1' as string | null,
    actionPlanId: 'ap-mock-1',
    conversationId: null,
    ownerUserId: users[0].id,
    title: 'Prepare executive renewal briefing',
    description: 'Summarize renewal risks, usage metrics, and proposed concessions.',
    priority: 'urgent',
    status: 'in_progress',
    dueDate: daysAgo(-1),
    createdAt: daysAgo(3),
    updatedAt: daysAgo(1),
  },
  {
    id: 'task-mock-2',
    orgId: org.id,
    customerId: 'cust-mock-2',
    actionPlanId: 'ap-mock-2',
    conversationId: null,
    ownerUserId: users[1].id,
    title: 'Draft analytics upsell proposal',
    description: 'Highlight projected ROI and roadmap alignment.',
    priority: 'high',
    status: 'todo',
    dueDate: daysAgo(-3),
    createdAt: daysAgo(5),
    updatedAt: daysAgo(5),
  },
  {
    id: 'task-mock-3',
    orgId: org.id,
    customerId: 'cust-mock-3',
    actionPlanId: null,
    conversationId: null,
    ownerUserId: users[2].id,
    title: 'Send onboarding survey follow-up',
    description: 'Confirm training completion and capture satisfaction rating.',
    priority: 'medium',
    status: 'done',
    dueDate: daysAgo(2),
    createdAt: daysAgo(10),
    updatedAt: daysAgo(2),
  },
  {
    id: 'task-mock-4',
    orgId: org.id,
    customerId: 'cust-mock-4',
    actionPlanId: 'ap-mock-4',
    conversationId: null,
    ownerUserId: users[0].id,
    title: 'Draft expansion business case',
    description: 'Detail cost savings from pilot and project expansion ROI.',
    priority: 'high',
    status: 'in_progress',
    dueDate: daysAgo(-4),
    createdAt: daysAgo(6),
    updatedAt: daysAgo(1),
  },
  {
    id: 'task-mock-5',
    orgId: org.id,
    customerId: 'cust-mock-5',
    actionPlanId: 'ap-mock-5',
    conversationId: null,
    ownerUserId: users[1].id,
    title: 'Update QBR deck',
    description: 'Incorporate sustainability impact metrics and NPS trend.',
    priority: 'medium',
    status: 'todo',
    dueDate: daysAgo(-10),
    createdAt: daysAgo(12),
    updatedAt: daysAgo(6),
  },
  {
    id: 'task-mock-6',
    orgId: org.id,
    customerId: 'cust-mock-6',
    actionPlanId: 'ap-mock-6',
    conversationId: null,
    ownerUserId: users[2].id,
    title: 'Coordinate outage RCA',
    description: 'Collect logs from infrastructure team and draft summary.',
    priority: 'urgent',
    status: 'in_progress',
    dueDate: daysAgo(-1),
    createdAt: daysAgo(2),
    updatedAt: daysAgo(0),
  },
]

// Map expanded conversations to match customer ID format (1 -> cust-mock-1, 2 -> cust-mock-2, etc.)
// Only include conversations for customers that exist in the system (cust-mock-1 through cust-mock-6)
export const conversations = expandedMockConversations
  .filter((conv) => {
    const customerIdNum = parseInt(conv.customerId, 10)
    return !isNaN(customerIdNum) && customerIdNum >= 1 && customerIdNum <= 6
  })
  .map((conv) => {
    const customerIdNum = parseInt(conv.customerId, 10)
    const mappedCustomerId = `cust-mock-${customerIdNum}` as string | null
    return {
      ...conv,
      customerId: mappedCustomerId,
      createdAt: conv.date, // Use date as createdAt if not provided
    }
  })

export const aiAgentChats = [
  {
    id: 'ai-chat-jamie',
    orgId: org.id,
    customerId: 'cust-mock-1' as string | null,
    userId: users[0].id,
    title: 'Renewal prep discussion',
    createdAt: daysAgo(3),
    updatedAt: daysAgo(0),
    lastMessageAt: daysAgo(0),
  },
  {
    id: 'ai-chat-priya',
    orgId: org.id,
    customerId: 'cust-mock-2',
    userId: users[1].id,
    title: 'Upsell playbook ideas',
    createdAt: daysAgo(5),
    updatedAt: daysAgo(1),
    lastMessageAt: daysAgo(1),
  },
  {
    id: 'ai-chat-sasha',
    orgId: org.id,
    customerId: 'cust-mock-6',
    userId: users[2].id,
    title: 'Outage recovery checklist',
    createdAt: daysAgo(1),
    updatedAt: daysAgo(0),
    lastMessageAt: isoDate(new Date()),
  },
]

export const aiAgentMessages = [
  {
    id: 'ai-chat-jamie-msg-1',
    chatId: 'ai-chat-jamie',
    role: 'user',
    content: 'Summarize key risks for Jamie before our renewal call.',
    createdAt: daysAgo(3),
  },
  {
    id: 'ai-chat-jamie-msg-2',
    chatId: 'ai-chat-jamie',
    role: 'assistant',
    content:
      '- Pricing surprise increased churn risk; prepare ROI justification.\n- Confirm executive alignment and billing remediation steps.\n- Offer phased increase to maintain trust.',
    createdAt: daysAgo(2),
  },
  {
    id: 'ai-chat-priya-msg-1',
    chatId: 'ai-chat-priya',
    role: 'user',
    content: 'How should I position the analytics add-on to Priya?',
    createdAt: daysAgo(5),
  },
  {
    id: 'ai-chat-priya-msg-2',
    chatId: 'ai-chat-priya',
    role: 'assistant',
    content:
      '- Lead with integration ease and time-to-value.\n- Highlight peer benchmarks showing 30% ARR lift.\n- Confirm required data sources before drafting proposal.',
    createdAt: daysAgo(4),
  },
  {
    id: 'ai-chat-sasha-msg-1',
    chatId: 'ai-chat-sasha',
    role: 'user',
    content: 'Draft apologies and remediation steps for the Nimbus outage.',
    createdAt: daysAgo(1),
  },
  {
    id: 'ai-chat-sasha-msg-2',
    chatId: 'ai-chat-sasha',
    role: 'assistant',
    content:
      '- Provide RCA timeline and engineering contact.\n- Offer two-month service credit and premium support check-ins.\n- Share preventive investments in uptime and monitoring.',
    createdAt: isoDate(new Date()),
  },
]

export const calendarEvents = [
  {
    id: 'cal-mock-1',
    customerId: 'cust-mock-1' as string | null,
    title: 'Executive Renewal Alignment',
    date: isoDate(new Date()),
    type: 'meeting' as const,
    goal: 'Align renewal pricing and mitigate churn risk with executive stakeholders.',
    prepNotes: 'Review contract usage metrics and pricing alternatives.',
    talkingPoints: [
      'Highlight roadmap investments',
      'Discuss phased pricing adjustments',
      'Outline executive support plan',
    ],
    createdAt: daysAgo(1),
  },
  {
    id: 'cal-mock-2',
    customerId: 'cust-mock-2',
    title: 'Analytics Add-on Demo',
    date: daysAgo(-2),
    type: 'demo' as const,
    goal: 'Demo premium analytics capabilities to product leadership.',
    prepNotes: 'Prepare custom dashboards using Lumenwave sample data.',
    talkingPoints: ['Feature roadmap', 'Security posture', 'Implementation timeline'],
    createdAt: daysAgo(4),
  },
  {
    id: 'cal-mock-3',
    customerId: 'cust-mock-3',
    title: 'Onboarding Check-in',
    date: daysAgo(-1),
    type: 'follow_up' as const,
    goal: 'Confirm onboarding tasks completion and gather feedback.',
    prepNotes: null,
    talkingPoints: [
      'Training satisfaction',
      'Upcoming milestones',
      'Support resources',
    ],
    createdAt: daysAgo(7),
  },
  {
    id: 'cal-mock-4',
    customerId: 'cust-mock-4',
    title: 'Pilot Expansion Planning',
    date: daysAgo(-3),
    type: 'meeting' as const,
    goal: 'Align on rollout plan for additional manufacturing sites.',
    prepNotes: 'Bring pilot metrics and proposed enablement timeline.',
    talkingPoints: [
      'Pilot adoption metrics',
      'Rollout schedule',
      'Training ownership',
    ],
    createdAt: daysAgo(5),
  },
  {
    id: 'cal-mock-5',
    customerId: 'cust-mock-5',
    title: 'Quarterly Health Review Follow-up',
    date: daysAgo(-6),
    type: 'follow_up' as const,
    goal: 'Share health score summary and confirm next QBR.',
    prepNotes: 'Attach resolved incident summary and NPS trend.',
    talkingPoints: [
      'Service stability metrics',
      'Quarterly objectives',
      'Next QBR date',
    ],
    createdAt: daysAgo(8),
  },
  {
    id: 'cal-mock-6',
    customerId: 'cust-mock-6',
    title: 'Outage Recovery Call',
    date: isoDate(new Date()),
    type: 'call' as const,
    goal: 'Present RCA findings and negotiate service credits.',
    prepNotes: 'Review incident timeline, mitigation actions, and proposed credits.',
    talkingPoints: [
      'Root cause summary',
      'Preventative measures',
      'Service credit offer',
    ],
    createdAt: daysAgo(0),
  },
]

export const baseState = {
  org,
  users,
  invitations,
  apiKeys,
  customers,
  actionPlans,
  tasks,
  conversations,
  aiAgentChats,
  aiAgentMessages,
  calendarEvents,
  teams,
  teamMembers,
  boards,
  boardColumns,
  boardCards,
  boardTeamPermissions,
  routingRules,
}

